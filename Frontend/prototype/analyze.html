<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="TRENDYZER is a web application that performs time-series analysis on twitter datasets to detect data trends through a statistical data model (ARIMA) to extract insights and sentiments to help in the decision making process.">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


    <!-- Layout -->
<!--    <link rel="stylesheet" type="text/css" href="styles/style.css">-->
<!--      <link rel="stylesheet" type="text/css" href="styles/timeseries.css">-->
      <link rel="stylesheet" type="text/css" href="styles/analyze.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="http://d3js.org/d3.v3.min.js">  </script>
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

      
    
    <title>TRENDYZER|ANALYZE</title>
  </head>

  <body>
    <header>
        
        <div class="container">
            <div class="row ">
                <img class="logo col-sm-5" alt="logo" src="imgs/logo.png">
<!--                <h4 class="slogan">Trends detector and analyzer.</h4>-->
                <div class="btns">
                    <div class="col-sm-1"><a href="validate.html" class="btn btn-primary" role="button">Validate</a></div>
                    <div class="col-sm-2"><a href="index.html" class="btn btn-default" role="button">Back</a></div>
                </div>
            </div>
            
            
            
            
            
        </div>
        
        

    </header>
      
      <div class="container">
          <div class="row">
              <div class="co-sm-5">
                  
              
              </div>
          </div>
            
      </div>
      
      <script>
			
			var color = d3.scale.category10();
			var margin = 100;
			var width = 800,height = 350;	
			var centered;
			var svg = d3.select("body")
				.append("svg")
				.attr("width",width + margin)
				.attr("height",height + margin)
				.append("g")
				.attr("class","map");
				
			var projection = d3.geo.mercator().scale(100).translate([width/2,height/1.1]);
				
			var path = d3.geo.path().projection(projection);	
				
			d3.json("geo.json", function(mdata) {
			
				var map = svg.selectAll("path")
					.data(mdata.features)
					.enter()
					.append("path")
					.attr("d", path)
					.attr("fill", "steelblue")
					.on("click", clicked)
			
				d3.csv("TweetLocation.csv", function(data){
				
					var div = d3.select("body").append("div")
						.attr("class", "toolpit")
						.style("position", "absolute")        
						.style("text-align", "center")         
						.style("width", "215px")                  
						.style("height", "180px")               
						.style("padding", "2px")
						.style("font-size", "17px")
						.style("font-family", 'Open Sans')        
						.style("background", "lightsteelblue")  
						.style("border", "0px")   
						.style("border-radius", "8px")          
						.style("pointer-events", "none")
						.style("opacity", 0);
					
					var bubble = svg.selectAll(".bubble")
						.data(data)
						.enter()
						.append("g")
						.attr("class", "bubble")
						
					bubble.append("circle")
						//.attr('cx',function(d){return d.longitude})
						//.attr('cy',function(d){return d.latitude})
						.attr('r',4)
						.attr("transform", function(d) { return "translate(" + projection([ d.longitude, d.latitude ]) + ")"; })
						.attr('fill','#F26247')
						.on("mouseover", function(d) {
						
							div.transition()
								.duration(200)
								.style("opacity", .9);
							
							/*div.append("text")
								.attr("x", function(d) {return d3.event.pageX +;} )
								.attr("y", function(d) {return d3.event.pageY - 28})
								.text(function(d) {return d.text;});*/
								
							div .html(d.screenName + "<br/>" + "-----------------" + "<br/>" + d.text)  
									.style("left", (d3.event.pageX + 20) + "px")     
									.style("top", (d3.event.pageY - 28) + "px");  
						}) 
						
						.on("mouseout", function(d) {       
							div.transition()        
								.duration(500)      
								.style("opacity", 0);   
						});	

				} )

			} )	
			
			function clicked(d) {
				  var x, y, k;

				  if (d && centered !== d) {
					var centroid = path.centroid(d);
					x = centroid[0];
					y = centroid[1];
					k = 4;
					centered = d;
				  } else {
					x = width / 2;
					y = height / 2;
					k = 1;
					centered = null;
				  }

				  svg.selectAll("path")
					  .classed("active", centered && function(d) { return d === centered; });

				  svg.transition()
					  .duration(750)
					  .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
					  .style("stroke-width", 1.5 / k + "px");
			}
			
			
			
			/*var zoom = d3.behavior.zoom()
				.on("zoom",function() {
					svg.attr("transform","translate("+ 
					d3.event.translate.join(",")+")scale("+d3.event.scale+")");
					svg.selectAll("path")  
					.attr("d", path.projection(projection)); 
				});

			svg.call(zoom)	*/
		</script>
       
      
    
    <script src="js/jquery-1.12.0.min.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>